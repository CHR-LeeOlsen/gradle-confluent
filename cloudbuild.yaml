steps:
- name: 'gcr.io/cloud-builders/git'
  id: 'complete git checkout'
  args: [ 'fetch','--tags','--unshallow']
- name: 'openjdk'
  id: 'create gradle_cache directory
  args: ['mkdir','-p','$_GRADLE_CACHE']
- name: gcr.io/cloud-builders/gsutil
  args: ['rsync', '-r', 'gs://rpa-cloudbuild-cache/gradle/$_GRADLE_CACHE/', '$_GRADLE_CACHE']
- name: 'openjdk'
  args: [ './gradlew', '--build-cache', 'build', '-Si', '-Panalytics.buildId=$BUILD_ID', '-PgithubToken=$_GITHUB_TOKEN', '-g', '$_GRADLE_CACHE']
- name: gcr.io/cloud-builders/gsutil
  args: ['rsync', '-r', '$_GRADLE_CACHE', 'gs://rpa-cloudbuild-cache/gradle/$_GRADLE_CACHE/']